{% load static %}
<link href="{% static " css/styles.css" %}" rel="stylesheet">
<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.20/datatables.min.css" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Create NFT1155 - BAFAP</title>

    <style type="text/css">
        img {
            width: 100px;
            height: 100px
        }
    </style>
    <!-- Favicon-->
    <!-- <link rel="icon" type="image/x-icon" href="assets/favicon.ico" /> -->
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
</head>

<body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="#!">BAFAP</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="/settings721/">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">Create</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="/create-NFT721/">NFT 721</a></li>
                            <li><a class="dropdown-item" href="/create-NFT1155/">NFT 1155</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Shop</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="/sale/list-direct-sale/">Direct Sale</a></li>
                            <li><a class="dropdown-item" href="/sale/list-auction">Auction</a></li>
                        </ul>
                    </li>
                    <!-- <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">圖文作家</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="/writer_subscribe/">已訂閱之作家</a></li>
                            <li><a class="dropdown-item" href="/writer_all/">所有圖文作家</a></li>
                        </ul>
                    </li> -->
                </ul>
                <form class="d-flex">
                    <div>
                        <button type="button" class="btn btn-outline-dark" id="btn_buy865" onclick="buy865()">
                            <!-- <i class="bi-cart-fill me-1"></i>
                            Cart -->
                            <span class="badge bg-dark text-white ms-1 rounded-pill">{{user.platform_token}}</span>
                        </button>
                    </div>
                    <div style="padding-left: 30px">
                        <button type = "button" class="btn btn-outline-dark" id="btn_logout" onclick="logout()">
                            Logout
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </nav>
    <!-- Header-->
    <header class="bg-dark py-5">
        <div class="container px-4 px-lg-5 my-5">
            <div class="text-center text-white">
                <h1 class="display-4 fw-bolder">Create ERC1155</h1>
                <!-- <p class="lead fw-normal text-white-50 mb-0">With this shop hompeage template</p> -->
            </div>
        </div>
    </header>
    <!-- Header-->
    <!-- Form-->
    <div class="row" style="width: 800px; margin: 10vh auto 0 auto;">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    創造你的NFT1155
                </div>
                <div class="card-body">
                    <!-- <div class="col-md-12">
                            <label id="lbl_Addr" class="form-label">User Addr</label>
                            <input type="text" class="form-control" id="txt_Addr" >
                        </div> -->

                    <div class="col-md-12">
                        <label id="lbl_Name" class="form-label">NFT721 Name</label>
                        <select class="form-control" id=sel_Name>
                            {% for erc721 in erc721s %}
                            <option value={{erc721.erc721_id}}>{{erc721.erc721_name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-12">
                        <label id="lbl_Name" class="form-label">NFT1155 Name</label>
                        <input type="text" class="form-control" id="txt_Name">
                    </div>
                    <div class="col-md-12">
                        <label id="lbl_Amout" class="form-label">Amout</label>
                        <input type="text" class="form-control" id="txt_Amout">
                    </div>
                    <br>
                    <button type="button" class="btn btn-primary" id="btn_Create"
                        onclick="create_confirm()">Create</button>
                </div>
                <form action="" enctype="multipart/form-data" method="POST" style="display:none">
                    {% csrf_token %}
                    {{form.as_p}}
                    <input type="submit" value="傳送" id="btn_Submit">
                </form>
            </div>
        </div>
    </div>
    <!-- Footer-->
    <footer class="py-5 bg-dark" style="margin-top: 15%;">
        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
        </div>
        <div class="container"><p class="m-0 text-center text-white" style = "font-size: 0.1px;">Copyright &copy; Your Website 2022</p></div>
    </footer>
    <!-- Form-->
    <div style="display:none">
        <h1>------------------------------------------------------------</h1>
        {% for erc721 in erc721s %}
        <p> ERC721 ID: {{erc721.erc721_id}}<br>
            ERC721 Name: {{erc721.erc721_name}} <br>
            ERC721 Image: <img class="card-img-top" src="{{erc721.img.url}}" /> <br>
            ERC721 Contract Address:{{erc721.contract_address}}<br>
            ERC721 etherscan_url: {{erc721.etherscan_url}} </p>
        {% endfor %}
        {% if Message %}
        {{Message}}
        {% endif %}
    </div>
</body>


<script>
    function create_confirm() {
        var yes = confirm('確定創造?')
        if (yes) {
            var e = document.getElementById("sel_Name");
            var value = e.options[e.selectedIndex].value;
            // console.log(value)

            document.getElementById('erc1155_name').value = document.getElementById('txt_Name').value;
            document.getElementById('erc721_id').value = value;
            document.getElementById('amount').value = document.getElementById('txt_Amout').value;

            var erc1155_id = "B" + (Math.floor(Math.random() * 10000)).toString()
            document.getElementById('erc1155_id').value = erc1155_id

            document.getElementById('btn_Submit').click()
            // alert("創造成功")
        }
    }

    function buy865(){
        return window.location.replace("{% url 'buy-erc865' %}")
    }
    function logout(){
        return window.location.replace("{% url 'login' %}")
    }      
    // function Create() {
    //     // var sel_id = $('#sel_Name').val().toString();
    //     // console.log(document.getElementById('sel_Name').value)
    //     var e = document.getElementById("sel_Name");
    //     var value = e.options[e.selectedIndex].value;
    //     console.log(value)

    //     document.getElementById('erc1155_name').value = document.getElementById('txt_Name').value;
    //     document.getElementById('erc721_id').value = value;
    //     document.getElementById('amount').value = document.getElementById('txt_Amout').value;

    //     var erc1155_id = "B" + (Math.floor(Math.random() * 10000)).toString()
    //     document.getElementById('erc1155_id').value = erc1155_id

    //     document.getElementById('btn_Submit').click()
    // }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</html>